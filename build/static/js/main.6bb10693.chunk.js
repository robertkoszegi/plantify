(this.webpackJsonpplantify=this.webpackJsonpplantify||[]).push([[0],{43:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),r=n(33),c=n.n(r),i=(n(43),n(10)),o=n.n(i),l=n(14),j=n(31),h=n(2),u=n(34),d=n(6),b=n(7),p=n(9),m=n(8),O=n(11),x=(n(45),n(12)),f=n(19),v=n(20),g=(n(46),n(0)),y=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return Object(g.jsx)(f.a,{className:"PlantListItem",children:Object(g.jsxs)(f.a.Body,{children:[Object(g.jsxs)(f.a.Text,{children:[Object(g.jsx)("div",{children:Object(g.jsx)("span",{children:Object(g.jsx)("strong",{children:this.props.name})})}),Object(g.jsx)(f.a.Img,{variant:"top",src:"".concat(this.props.image),style:{width:100,height:100}}),Object(g.jsxs)("div",{children:["$",this.props.price]})]}),Object(g.jsx)(x.b,{to:{pathname:"/details",state:{image:this.props.image,name:this.props.name,waterFreq:this.props.waterFreq,sunCond:this.props.sunCond,price:this.props.price,petFriendly:this.props.petFriendly,category:this.props.category}},children:Object(g.jsx)(v.a,{variant:"primary",children:"More Details"})})]})})}}]),n}(s.a.Component),w=(n(56),function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this;return this.props.activeCategory?Object(g.jsx)("div",{className:"PlantList",children:this.props.plantListings.filter((function(t){return t.category===e.props.activeCategory})).map((function(e){return Object(g.jsx)(y,{image:e.image,name:e.name,waterFreq:e.waterFreq,sunCond:e.sunCond,price:e.price,petFriendly:e.petFriendly,category:e.category},e.name)}))}):Object(g.jsx)("div",{className:"PlantList",children:this.props.plantListings.map((function(e){return Object(g.jsx)(y,{image:e.image,name:e.name,waterFreq:e.waterFreq,sunCond:e.sunCond,price:e.price,petFriendly:e.petFriendly,category:e.category},e.name)}))})}}]),n}(a.Component));n(57);var C=function(e){return Object(g.jsxs)("div",{className:"Banner",children:[Object(g.jsx)("h1",{className:"bannerText",children:"Need help finding your perfect plant?"}),Object(g.jsx)("br",{}),Object(g.jsxs)("h1",{className:"bannerLine",children:[" Try our ",Object(g.jsx)(x.b,{to:"/quiz",children:"Plant-Picker,"})," let's make this easy. "]}),Object(g.jsx)("img",{src:"./banner.jpg",alt:""})]})},I=(n(58),function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).logout=function(){localStorage.removeItem("token"),e.props.setUserInState(null)},e}return Object(b.a)(n,[{key:"render",value:function(){return Object(g.jsx)("div",{className:"UserLogOut",children:Object(g.jsx)("button",{className:"logoutButton",onClick:this.logout,children:"Logout"})})}}]),n}(s.a.Component)),S=I,k=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={activeCategory:""},e}return Object(b.a)(n,[{key:"render",value:function(){return Object(g.jsxs)("div",{className:"navigationContent",children:[Object(g.jsx)(x.b,{to:"/home",children:" Plants "}),Object(g.jsx)(x.b,{to:"/quiz",children:" Take the plant quiz! "}),Object(g.jsx)(x.b,{to:"/wishlist",children:" WishList "}),Object(g.jsx)(x.b,{to:"/quiz",children:" Recommended for you "}),Object(g.jsx)(x.b,{to:"/order",children:"Cart"}),Object(g.jsx)(S,{user:this.props.user,setUserInState:this.props.setUserInState})]})}}]),n}(s.a.Component),N=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={plantCategories:[],plantListings:[],activeCategory:"",menuItems:[],categoryItems:[]},e.handleCat=function(t){e.setState({activeCategory:t})},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,a,s,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("token"),e.next=4,fetch("/api/plantList",{headers:{Authorization:"Bearer "+t}});case 4:return n=e.sent,e.next=7,fetch("/api/plantList/categories");case 7:return a=e.sent,e.next=10,n.json();case 10:return s=e.sent,e.next=13,a.json();case 13:if(r=e.sent,n.ok){e.next=16;break}throw new Error("Could not fetch plants");case 16:if(a.ok){e.next=18;break}throw new Error("Could not fetch categories");case 18:this.setState({plantListings:s,plantCategories:r}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),console.log("Error:",e.t0);case 24:case"end":return e.stop()}}),e,this,[[0,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(g.jsxs)("main",{className:"HomePage",children:[Object(g.jsx)("nav",{className:"Navigation",children:Object(g.jsx)(k,{setUserInState:this.props.setUserInState})}),Object(g.jsx)(C,{}),Object(g.jsx)("button",{className:"catButton palmButton",onClick:function(){return e.handleCat("6148e261a73b6d074a728570")},children:"Palms"}),Object(g.jsx)("button",{className:"catButton fernButton",onClick:function(){return e.handleCat("6148e261a73b6d074a728572")},children:"Ferns"}),Object(g.jsx)("button",{className:"catButton succulentButton",onClick:function(){return e.handleCat("6148e261a73b6d074a728571")},children:"Succulents"}),Object(g.jsx)("button",{className:"catButton vineButton",onClick:function(){return e.handleCat("6148e261a73b6d074a728573")},children:"Vines"}),Object(g.jsx)("button",{className:"catButton cactiButton",onClick:function(){return e.handleCat("6148e261a73b6d074a728574")},children:"Cacti"}),Object(g.jsx)("button",{className:"catButton allButton",onClick:function(){return e.handleCat("")},children:"All"}),Object(g.jsx)(w,{plantListings:this.state.plantListings,activeCategory:this.state.activeCategory})]})}}]),n}(s.a.Component),L=N;n(59);function T(e){console.log(e.order);var t=e.order.lineItems.map((function(e){return Object(g.jsxs)("li",{children:[Object(g.jsx)("strong",{children:e.item.name})," ",Object(g.jsx)("br",{})," ",e.item.price]})})),n=new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"long",day:"2-digit"});return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h3",{children:n.format(Date.parse(e.order.createdAt))}),Object(g.jsx)("div",{children:Object(g.jsxs)("ul",{children:[t," ",Object(g.jsx)("br",{}),Object(g.jsxs)("span",{children:["Total: $",e.order.total]})]})})]})}function U(e){var t=e.orderHistory.map((function(e){return Object(g.jsx)(T,{order:e})}));return Object(g.jsxs)("main",{className:"PrevOrdersList",children:[Object(g.jsx)("h1",{children:"Order History"}),t.length>0?t:Object(g.jsx)("span",{className:"no-orders",children:"No Previous Orders"})]})}var A=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={},e}return Object(b.a)(n,[{key:"render",value:function(){return Object(g.jsxs)("main",{className:"OrderHistoryPage",children:[Object(g.jsx)("nav",{className:"Navigation",children:Object(g.jsx)(k,{setUserInState:this.props.setUserInState})}),Object(g.jsx)("h1",{children:"OrdersPage"}),Object(g.jsx)(U,{})]})}}]),n}(s.a.Component),F=A;function P(e){return Object(g.jsxs)("div",{className:"WishLineItem",children:[Object(g.jsx)("img",{src:"".concat(e.wishLineItems.item.image),style:{width:100}}),Object(g.jsx)("br",{}),e.wishLineItems.item.name,Object(g.jsx)("br",{}),e.wishLineItems.item.sunCond,Object(g.jsx)("br",{}),e.wishLineItems.item.waterFreq,Object(g.jsx)("br",{}),"Pet Friendly: ",e.wishLineItems.item.petFriendly?"Yes":"No",Object(g.jsx)("br",{}),e.wishLineItems.item.price,Object(g.jsx)("br",{}),Object(g.jsx)("button",{className:"detailButton",onClick:function(){e.handleAddToCart(e.wishLineItems.item)},children:"Add to cart"})]})}function q(e){return Object(g.jsx)("div",{className:"wishDetails",children:e.wishLineItems.map((function(t){return Object(g.jsx)(P,{handleAddToCart:e.handleAddToCart,removeWish:e.removeWish,wishLineItems:t})}))})}n(60);var B=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={wishLineItems:[]},e.handleAddToWishListDatabase=Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setState({wishLineItems:e.props.wishLineItems}),t.next=4,fetch("api/wishlist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wishLineItems:e.props.wishLineItems})});case 4:return n=t.sent,t.next=7,n.json();case 7:t.sent,t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0.message),console.log("Error:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,10]])}))),e.removeWish=Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/wishlist",{method:"POST",headers:{"Content-Type":"application/json"}});case 3:return n=t.sent,t.next=6,n.json();case 6:t.sent,e.setState({wishLineItems:[]}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("Error:",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])}))),e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("token"),e.next=4,fetch("/api/wishlist",{headers:{Authorization:"Bearer "+t}});case 4:if(n=e.sent,a=n.json(),n.ok){e.next=8;break}throw new Error("Could not fetch wishlist");case 8:this.setState({wishLineItems:a}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error:",e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(g.jsxs)("main",{className:"WishListPage",children:[Object(g.jsx)("nav",{className:"Navigation",children:Object(g.jsx)(k,{setUserInState:this.props.setUserInState})}),Object(g.jsx)("h1",{children:"WishListPage"}),Object(g.jsx)(q,{removeWish:this.removeWish,wishLineItems:this.props.wishLineItems,handleAddToCart:this.props.handleAddToCart})]})}}]),n}(s.a.Component),D=B,E=(n(61),n(15)),W=n(22);n(62);var H=function(e){var t=s.a.useState({sun:"",price:"",water:"",pet:""}),n=Object(W.a)(t,2),a=n[0],r=n[1];function c(e){var t=e.target.value;r(Object(h.a)(Object(h.a)({},a),{},Object(E.a)({},e.target.name,t)))}return Object(g.jsx)("div",{className:"wrapper",children:Object(g.jsx)("div",{className:"Center",children:Object(g.jsxs)("form",{className:"quizForm",children:[Object(g.jsx)("span",{children:"How much sun exposure can you give your plant?"}),Object(g.jsx)("div",{className:"radio",children:Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{name:"sun",type:"radio",value:"Shade",checked:"Shade"===a.sun,onChange:c}),"Shade"]})}),Object(g.jsx)("div",{className:"radio",children:Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{name:"sun",type:"radio",value:"Partial Sun",checked:"Partial Sun"===a.sun,onChange:c}),"Partial Sun"]})}),Object(g.jsx)("div",{className:"radio",children:Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{name:"sun",type:"radio",value:"Full Sun",checked:"Full Sun"===a.sun,onChange:c}),"Full Sun"]})}),Object(g.jsx)("span",{children:"What is the maximum price you would pay for a plant?"}),Object(g.jsx)("div",{className:"radio",children:Object(g.jsx)("label",{children:Object(g.jsx)("input",{name:"price",type:"text",value:a.price,onChange:c})})}),Object(g.jsx)("span",{children:"What watering frequency can you manage for your plant?"}),Object(g.jsx)("div",{className:"radio",children:Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{name:"water",type:"radio",value:"Low",checked:"Low"===a.water,onChange:c}),"Low"]})}),Object(g.jsx)("div",{className:"radio",children:Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{name:"water",type:"radio",value:"Medium",checked:"Medium"===a.water,onChange:c}),"Medium"]})}),Object(g.jsx)("div",{className:"radio",children:Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{name:"water",type:"radio",value:"High",checked:"High"===a.water,onChange:c}),"High"]})}),Object(g.jsx)("span",{children:"Do you need a pet friendly plant?"}),Object(g.jsx)("div",{className:"radio",children:Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{name:"pet",type:"radio",value:"true",checked:"true"===a.pet,onChange:c}),"Yes"]})}),Object(g.jsx)("div",{className:"radio",children:Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{name:"pet",type:"radio",value:"false",checked:"false"===a.pet,onChange:c}),"No"]})}),Object(g.jsx)(x.b,{className:"linkBtn",to:{pathname:"/recommendations/show",search:"",state:a},children:Object(g.jsx)(v.a,{children:"Submit"})})]})})})},z=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={},e}return Object(b.a)(n,[{key:"render",value:function(){return Object(g.jsxs)("main",{className:"QuizPage",children:[Object(g.jsx)("nav",{className:"Navigation",children:Object(g.jsx)(k,{setUserInState:this.props.setUserInState})}),Object(g.jsx)("h1",{children:"Plant Picker"}),Object(g.jsx)(H,{})]})}}]),n}(s.a.Component),M=z,J=(n(63),n(28),n(37)),Y=n(38),G=n(25),R=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={plantListings:[]},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=JSON.stringify(this.props.location.state),(n=new Headers).append("Content-Type","application/json"),e.next=6,fetch("/api/recommendations",{method:"POST",headers:n,body:t});case 6:if((a=e.sent).ok){e.next=9;break}throw new Error("Could not fetch plants");case 9:return e.next=11,a.json();case 11:s=e.sent,this.setState({plantListings:s}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log("Error:",e.t0);case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(g.jsxs)("main",{className:"RecommendationsPage",children:[Object(g.jsx)("nav",{className:"Navigation",children:Object(g.jsx)(k,{setUserInState:this.props.setUserInState})}),Object(g.jsx)(J.a,{children:Object(g.jsx)("div",{className:"wrapper",children:Object(g.jsx)(Y.a,{children:Object(g.jsxs)(G.a,{xs:12,md:10,l:6,children:[Object(g.jsx)("h2",{className:"recommendText",children:"Based on your answers we recommend..."}),Object(g.jsx)("div",{className:"Recommendations",children:this.state.plantListings.length>0?Object(g.jsx)(w,{plantListings:this.state.plantListings}):Object(g.jsxs)("h2",{children:["No Matches Found. Browse our ",Object(g.jsx)(x.b,{to:"/home",children:"collection."})]})})]})})})})]})}}]),n}(s.a.Component),$=R,Q=(n(64),function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={data:e.props.location.state},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return Object(g.jsxs)("div",{className:"wrapperDetail",children:[Object(g.jsx)(k,{setUserInState:this.props.setUserInState}),Object(g.jsx)("main",{className:"plantDetail",children:Object(g.jsxs)("div",{className:"plantInfo",children:[Object(g.jsx)(x.b,{to:"/home",children:"Back"}),Object(g.jsx)("br",{}),Object(g.jsx)("img",{src:"".concat(this.state.data.image),style:{width:100}}),Object(g.jsx)("br",{}),Object(g.jsxs)("h1",{children:[" ",this.state.data.name," "]})," ",Object(g.jsx)("br",{}),"Watering Frequency: ",this.state.data.waterFreq," ",Object(g.jsx)("br",{}),"Sun Conditions: ",this.state.data.sunCond," ",Object(g.jsx)("br",{}),"$ ",this.state.data.price,Object(g.jsx)("br",{}),"Pet Friendly: ",this.state.data.petFriendly?"Yes":"No",Object(g.jsx)("br",{}),Object(g.jsx)("button",{className:"detailButton",onClick:function(){e.props.handleAddToCart(e.state.data)},children:"Add to cart"}),Object(g.jsx)("button",{className:"detailButton",onClick:function(){e.props.handleAddToWishlist(e.state.data)},children:"Add to wishlist"})]})})]})}}]),n}(s.a.Component));function V(e){return Object(g.jsxs)("div",{className:"OrderLineItem",children:[Object(g.jsxs)("div",{children:["Qty: ",e.lineItem.qty]}),Object(g.jsxs)("div",{children:["Name: ",e.lineItem.item.name]}),Object(g.jsxs)("div",{children:["Price: ",e.lineItem.item.price]}),Object(g.jsxs)("div",{children:["Watering Frequency: ",e.lineItem.item.waterFreq]}),Object(g.jsxs)("div",{children:["Sun Conditions: ",e.lineItem.item.sunCond]}),Object(g.jsxs)("div",{children:["Pet Friendly: ",e.lineItem.item.petFriendly?"Yes":"No"]})]})}var _=function(e){(new Date).toLocaleDateString();var t=e.lineItems.map((function(e){return Object(g.jsx)(V,{lineItem:e})}));return Object(g.jsxs)("div",{className:"OrderDetails",children:[Object(g.jsx)("h1",{children:"Your Current Order"}),Object(g.jsxs)("div",{className:"section-heading",children:[t.length>0?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("h2",{children:["TOTAL ",e.cartTotal]}),Object(g.jsx)("br",{})]}):Object(g.jsx)("br",{}),t.length>0?t:Object(g.jsx)("span",{className:"no-orders",children:"Your cart is empty"}),t.length>0?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("br",{}),Object(g.jsx)(v.a,{onClick:function(){e.handleCheckout()},children:"Checkout"})]}):Object(g.jsx)("br",{})]})]})},K=(n(65),function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={orderHistory:[]},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("token"),e.next=4,fetch("/api/orders",{headers:{Authorization:"Bearer "+t}});case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,this.setState({orderHistory:a}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("ERROR:",e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(g.jsxs)("main",{className:"OrderPage",children:[Object(g.jsx)("nav",{className:"Navigation",children:Object(g.jsx)(k,{setUserInState:this.props.setUserInState})}),Object(g.jsxs)("div",{className:"content",children:[Object(g.jsx)(f.a,{className:"orderBlock",children:Object(g.jsx)(f.a.Body,{children:Object(g.jsx)(_,{lineItems:this.props.lineItems,paid:this.props.paid,cartTotal:this.props.cartTotal,handleCheckout:this.props.handleCheckout})})}),Object(g.jsx)(f.a,{className:"orderBlock",children:Object(g.jsx)(f.a.Body,{children:Object(g.jsx)(U,{orderHistory:this.state.orderHistory})})})]})]})}}]),n}(s.a.Component)),X=K,Z=(n(66),n(67),n(13)),ee=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={name:"",email:"",password:"",confirm:"",error:""},e.handleChange=function(t){var n;e.setState((n={},Object(E.a)(n,t.target.name,t.target.value),Object(E.a)(n,"error",""),n))},e.handleSubmit=function(){var t=Object(l.a)(o.a.mark((function t(n){var a,s,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,fetch("/api/users/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.state.name,email:e.state.email,password:e.state.password})});case 4:if((a=t.sent).ok){t.next=7;break}throw new Error("fetch failed - bad request");case 7:return t.next=9,a.json();case 9:s=t.sent,localStorage.setItem("token",s),r=JSON.parse(atob(s.split(".")[1])).user,e.props.setUserInState(r),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),e.setState({error:"Sign Up Failed - Try Again"});case 18:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.state.password!==this.state.confirm;return Object(g.jsxs)("div",{className:"wrapper",children:[Object(g.jsxs)("div",{className:"Center",children:[Object(g.jsx)("h3",{children:"Sign Up for Plantify"}),Object(g.jsxs)(Z.a,{className:"signUpForm",autoComplete:"off",onSubmit:this.handleSubmit,children:[Object(g.jsxs)(Z.a.Group,{children:[Object(g.jsx)(Z.a.Label,{children:"Name"}),Object(g.jsx)(Z.a.Control,{type:"text",name:"name",value:this.state.name,onChange:this.handleChange,required:!0})]}),Object(g.jsx)(Z.a.Label,{children:"Email"}),Object(g.jsx)(Z.a.Control,{type:"email",name:"email",value:this.state.email,onChange:this.handleChange,required:!0}),Object(g.jsx)(Z.a.Label,{children:"Password"}),Object(g.jsx)(Z.a.Control,{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,required:!0}),Object(g.jsx)(Z.a.Label,{children:"Confirm"}),Object(g.jsx)(Z.a.Control,{type:"password",name:"confirm",value:this.state.confirm,onChange:this.handleChange,required:!0}),Object(g.jsx)(v.a,{className:"btn primary",type:"submit",disabled:e,children:"SIGN UP"})]})]}),Object(g.jsxs)("p",{className:"error-message",children:["\xa0",this.state.error]})]})}}]),n}(a.Component),te=(n(68),function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={email:"",password:"",error:""},e.handleChange=function(t){var n;e.setState((n={},Object(E.a)(n,t.target.name,t.target.value),Object(E.a)(n,"error",""),n))},e.handleSubmit=function(){var t=Object(l.a)(o.a.mark((function t(n){var a,s,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,fetch("/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.state.email,password:e.state.password})});case 4:if((a=t.sent).ok){t.next=7;break}throw new Error("Fetch failed - Bad request",a);case 7:return t.next=9,a.json();case 9:s=t.sent,localStorage.setItem("token",s),r=JSON.parse(atob(s.split(".")[1])).user,e.props.setUserInState(r),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),e.setState({error:"Sign Up Failed - Try Again"});case 18:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(n,[{key:"render",value:function(){return Object(g.jsx)("div",{className:"container",children:Object(g.jsxs)(f.a,{className:"loginCard",children:[Object(g.jsx)("div",{className:"form-container",onSubmit:this.handleSubmit,children:Object(g.jsxs)(Z.a,{className:"loginForm",autoComplete:"off",children:[Object(g.jsx)("h1",{className:"plantifyTitle",children:"Log In to Plantify"}),Object(g.jsxs)(Z.a.Group,{children:[Object(g.jsx)(Z.a.Label,{children:"Email"}),Object(g.jsx)(Z.a.Control,{className:"loginInput",type:"text",name:"email",value:this.state.email,onChange:this.handleChange,required:!0})]}),Object(g.jsxs)(Z.a.Group,{children:[Object(g.jsx)(Z.a.Label,{children:"Password"}),Object(g.jsx)(Z.a.Control,{className:"loginInput",type:"password",name:"password",value:this.state.password,onChange:this.handleChange,required:!0})]}),Object(g.jsx)(v.a,{class:"btn btn-primary",type:"submit",children:"LOG IN"})]})}),Object(g.jsxs)("p",{className:"error-message",children:["\xa0",this.state.error]})]})})}}]),n}(a.Component)),ne=(n(69),function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this;return Object(g.jsxs)("main",{className:"AuthPage",children:[Object(g.jsx)("div",{children:Object(g.jsx)("h3",{onClick:function(){return e.setState({showLogin:!e.state.showLogin})}})}),Object(g.jsx)(te,{setUserInState:this.props.setUserInState}),Object(g.jsx)(ee,{setUserInState:this.props.setUserInState})]})}}]),n}(s.a.Component)),ae=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={user:null,lineItems:[],wishLineItems:[],paid:!1,total:0},e.setUserInState=function(t){e.setState({user:t})},e.updateCartTotal=function(){var t,n=0,a=Object(u.a)(e.state.lineItems);try{for(a.s();!(t=a.n()).done;){var s=t.value;n+=s.item.price*s.qty}}catch(r){a.e(r)}finally{a.f()}e.setState({total:n})},e.handleAddToCart=function(t){console.log("incoming_item:",t);var n=e.state.lineItems.some((function(e){return e.item.name===t.name}));console.log(n),n?e.setState({lineItems:e.state.lineItems.map((function(e){return e.item.name===t.name?Object(h.a)(Object(h.a)({},e),{},{qty:e.qty+1}):e}))},e.updateCartTotal):e.setState({lineItems:[].concat(Object(j.a)(e.state.lineItems),[{qty:1,item:t}])},e.updateCartTotal)},e.handleAddToWishlist=function(t){e.state.wishLineItems.some((function(e){return e.item.name===t.name}))?e.setState({wishLineItems:e.state.wishLineItems.map((function(e){return e.item.name===t.name?Object(h.a)(Object(h.a)({},e),{},{qty:e.qty+1}):e}))}):e.setState({wishLineItems:[].concat(Object(j.a)(e.state.wishLineItems),[{qty:1,item:t}])})},e.handleCheckout=Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(e.state.lineItems),0!==e.state.lineItems.length){t.next=5;break}alert("Your shopping cart is empty"),t.next=18;break;case 5:return t.prev=5,e.setState({paid:!0}),n=localStorage.getItem("token"),t.next=10,fetch("api/orders",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify({lineItems:e.state.lineItems,paid:e.state.paid,total:e.state.total})});case 10:t.sent,e.setState({lineItems:[]}),window.location.reload(!1),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),console.error("Error:",t.t0);case 18:case"end":return t.stop()}}),t,null,[[5,15]])}))),e.componentDidMount=Object(l.a)(o.a.mark((function t(){var n,a,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=localStorage.getItem("token"))){t.next=18;break}return t.prev=2,t.next=5,fetch("/api/users/verify",{headers:{Authorization:"Bearer "+n}});case 5:return a=t.sent,t.next=8,a.json();case 8:if("TokenExpiredError"!==t.sent.name){t.next=11;break}throw new Error("token expired");case 11:s=JSON.parse(atob(n.split(".")[1])).user,e.setState({user:s}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(2),e.setState({user:null});case 18:case"end":return t.stop()}}),t,null,[[2,15]])}))),e}return Object(b.a)(n,[{key:"render",value:function(){var e=this;return Object(g.jsx)("main",{className:"App",children:this.state.user?Object(g.jsxs)(O.d,{children:[Object(g.jsx)(O.b,{path:"/home",render:function(t){return Object(g.jsx)(L,Object(h.a)(Object(h.a)({},t),{},{user:e.state.user,setUserInState:e.setUserInState}))}}),Object(g.jsx)(O.b,{path:"/details",render:function(t){return Object(g.jsx)(Q,Object(h.a)(Object(h.a)({},t),{},{lineItems:e.state.lineItems,wishLineItems:e.state.wishLineItems,handleAddToWishlist:e.handleAddToWishlist,handleAddToCart:e.handleAddToCart,user:e.state.user,setUserInState:e.setUserInState}))}}),Object(g.jsx)(O.b,{path:"/quiz",render:function(t){return Object(g.jsx)(M,Object(h.a)(Object(h.a)({},t),{},{user:e.state.user,setUserInState:e.setUserInState}))}}),Object(g.jsx)(O.b,{path:"/recommendations/show",render:function(t){return Object(g.jsx)($,Object(h.a)(Object(h.a)({},t),{},{user:e.state.user,setUserInState:e.setUserInState}))}}),Object(g.jsx)(O.b,{path:"/order",render:function(t){return Object(g.jsx)(X,Object(h.a)(Object(h.a)({},t),{},{lineItems:e.state.lineItems,paid:e.state.paid,handleCheckout:e.handleCheckout,cartTotal:e.state.total,user:e.state.user,setUserInState:e.setUserInState}))}}),Object(g.jsx)(O.b,{path:"/orderhistory",render:function(t){return Object(g.jsx)(F,Object(h.a)(Object(h.a)({},t),{},{user:e.state.user,setUserInState:e.setUserInState}))}}),Object(g.jsx)(O.b,{path:"/wishlist",render:function(t){return Object(g.jsx)(D,Object(h.a)(Object(h.a)({},t),{},{handleAddToCart:e.handleAddToCart,wishLineItems:e.state.wishLineItems,user:e.state.user,setUserInState:e.setUserInState}))}}),Object(g.jsx)(O.a,{to:"/home"})]}):Object(g.jsx)(ne,{user:this.state.user,setUserInState:this.setUserInState})})}}]),n}(a.Component),se=ae;c.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(x.a,{children:Object(g.jsx)(se,{})})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.6bb10693.chunk.js.map